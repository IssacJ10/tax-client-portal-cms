{
    "header": {
        "title": "{year} Personal Tax Return (T1)",
        "description": "Complete your T1 General Tax Return accurately.",
        "showProgress": true
    },
    "steps": [
        {
            "id": "personal_id",
            "title": "Personal Info",
            "order": 10,
            "description": "Identity & Contact"
        },
        {
            "id": "residency",
            "title": "Residency",
            "order": 20,
            "description": "Status & Provinces"
        },
        {
            "id": "family",
            "title": "Family",
            "order": 30,
            "description": "Spouse & Dependents"
        },
        {
            "id": "income_selection",
            "title": "Income Sources",
            "order": 40,
            "description": "T4, Self-Employment"
        },
        {
            "id": "income_details",
            "title": "Income Details",
            "order": 50,
            "description": "Detailed Entry"
        },
        {
            "id": "deductions_selection",
            "title": "Deductions",
            "order": 60,
            "description": "Expenses & Credits"
        },
        {
            "id": "deductions_details",
            "title": "Deduction Details",
            "order": 70,
            "description": "Medical, Moving"
        },
        {
            "id": "review",
            "title": "Review",
            "order": 80,
            "description": "Verify"
        },
        {
            "id": "payment",
            "title": "Payment",
            "order": 90,
            "description": "Finalize & Pay"
        }
    ],
    "questions": [
        {
            "id": "q_fname",
            "type": "text",
            "label": "First Name",
            "name": "personalInfo.firstName",
            "validation": {
                "required": true
            },
            "step": "personal_id",
            "order": 10
        },
        {
            "id": "q_lname",
            "type": "text",
            "label": "Last Name",
            "name": "personalInfo.lastName",
            "validation": {
                "required": true
            },
            "step": "personal_id",
            "order": 12
        },
        {
            "id": "q_sin",
            "type": "text",
            "label": "SIN",
            "name": "personalInfo.sin",
            "validation": {
                "required": true,
                "pattern": "^\\d{3}-?\\d{3}-?\\d{3}$"
            },
            "placeholder": "999-999-999",
            "step": "personal_id",
            "order": 13
        },
        {
            "id": "q_dob",
            "type": "date",
            "label": "Date of Birth",
            "name": "personalInfo.dateOfBirth",
            "validation": {
                "required": true,
                "maxDate": "today",
                "minDate": "1900-01-01"
            },
            "step": "personal_id",
            "order": 14
        },
        {
            "id": "q_marital",
            "type": "select",
            "label": "Marital Status",
            "name": "personalInfo.maritalStatus",
            "options": [
                {
                    "value": "SINGLE",
                    "label": "Single"
                },
                {
                    "value": "MARRIED",
                    "label": "Married"
                },
                {
                    "value": "COMMON_LAW",
                    "label": "Common-law"
                },
                {
                    "value": "SEPARATED",
                    "label": "Separated"
                },
                {
                    "value": "DIVORCED",
                    "label": "Divorced"
                },
                {
                    "value": "WIDOWED",
                    "label": "Widowed"
                }
            ],
            "validation": {
                "required": true
            },
            "step": "family",
            "order": 10
        },
        {
            "id": "q_income_sources",
            "type": "checkbox",
            "label": "Select Income Sources (Check all that apply)",
            "name": "income.sources",
            "options": [
                "Employment (T4)",
                "Self-Employment",
                "Rental Income",
                "Investments",
                "Capital Gains",
                "Pension (T4A)",
                "Tuition (T2202)"
            ],
            "validation": {
                "required": true
            },
            "step": "income_selection",
            "order": 10
        },
        {
            "id": "q_deduction_sources",
            "type": "checkbox",
            "label": "Select Deductions & Credits",
            "name": "deductions.sources",
            "options": [
                "RRSP Contributions",
                "Medical Expenses",
                "Donations",
                "Moving Expenses",
                "Child Care",
                "Work from Home"
            ],
            "validation": {
                "required": false
            },
            "step": "deductions_selection",
            "order": 10
        },
        {
            "id": "q_moving_details",
            "type": "repeater",
            "label": "Moving Expenses",
            "name": "deductions.moving",
            "step": "deductions_details",
            "order": 20,
            "config": {
                "addButtonLabel": "Add Move"
            },
            "conditional": {
                "parentQuestionId": "deductions.sources",
                "operator": "contains",
                "value": "Moving Expenses"
            },
            "fields": [
                {
                    "type": "text",
                    "name": "oldAddress",
                    "label": "Old Address",
                    "validation": {
                        "required": true
                    }
                },
                {
                    "type": "text",
                    "name": "newAddress",
                    "label": "New Address",
                    "validation": {
                        "required": true
                    }
                },
                {
                    "type": "date",
                    "name": "moveDate",
                    "label": "Date of Move",
                    "validation": {
                        "required": true,
                        "maxDate": "today"
                    }
                },
                {
                    "type": "number",
                    "name": "distance",
                    "label": "Distance (km)",
                    "validation": {
                        "required": true
                    }
                }
            ]
        }
    ],
    "pricing": {
        "baseFee": 45,
        "currency": "CAD",
        "taxRate": 0.15,
        "rules": [
            {
                "id": "fee_moving",
                "description": "Moving Expenses",
                "amount": 5,
                "condition": {
                    "parentQuestionId": "deductions.sources",
                    "operator": "contains",
                    "value": "Moving Expenses"
                }
            },
            {
                "id": "fee_childcare",
                "description": "Childcare Expenses",
                "amount": 5,
                "condition": {
                    "parentQuestionId": "deductions.sources",
                    "operator": "contains",
                    "value": "Child Care"
                }
            },
            {
                "id": "fee_medical",
                "description": "Medical Expenses",
                "amount": 5,
                "condition": {
                    "parentQuestionId": "deductions.sources",
                    "operator": "contains",
                    "value": "Medical Expenses"
                }
            },
            {
                "id": "fee_cap_gains",
                "description": "Capital Gains",
                "amount": 5,
                "condition": {
                    "parentQuestionId": "income.sources",
                    "operator": "contains",
                    "value": "Capital Gains"
                }
            },
            {
                "id": "fee_investments",
                "description": "Investments/Principal Residence",
                "amount": 5,
                "condition": {
                    "parentQuestionId": "income.sources",
                    "operator": "contains",
                    "value": "Investments"
                }
            },
            {
                "id": "fee_self_emp",
                "description": "Self-Employment Income",
                "amount": 15,
                "condition": {
                    "parentQuestionId": "income.sources",
                    "operator": "contains",
                    "value": "Self-Employment"
                }
            },
            {
                "id": "fee_rental",
                "description": "Rental Income",
                "amount": 15,
                "condition": {
                    "parentQuestionId": "income.sources",
                    "operator": "contains",
                    "value": "Rental Income"
                }
            },
            {
                "id": "disc_student",
                "description": "Student Discount (T2202)",
                "amount": -5,
                "condition": {
                    "parentQuestionId": "income.sources",
                    "operator": "contains",
                    "value": "Tuition (T2202)"
                }
            }
        ]
    }
}